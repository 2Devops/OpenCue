#!/bin/sh

# ORACLE_HOME should match project/build.scala
export ORACLE_HOME=/usr/lib64/oracle-instantclient-11.2
export LD_LIBRARY_PATH=/shots/spi/home/java/FileSequence/x86_64/v6/rhel7/:${ORACLE_HOME}
export TNS_ADMIN=/opt/tns

project_dir=$(readlink -f $(dirname $0)/..)

exec \
  /usr/bin/java \
    -Dcatalina.base=$project_dir \
    -XX:+UseParNewGC \
    -XX:+UseConcMarkSweepGC \
    -XX:+CMSClassUnloadingEnabled \
    -XX:CMSInitiatingOccupancyFraction=70 \
    -verbose:gc \
    -XX:+PrintGCDateStamps \
    -XX:+PrintGCDetails \
    -XX:+PrintGCTimeStamps \
    -XX:+PrintHeapAtGC \
    -XX:+PrintTenuringDistribution \
    -Xloggc:${project_dir}/logs/gc.log \
    -XX:+UseGCLogFileRotation \
    -XX:NumberOfGCLogFiles=10 \
    -XX:GCLogFileSize=1M \
    -Dfile.encoding=UTF8 \
    -Djava.net.preferIPv4Stack=true \
    -Xms3G \
    -Xmx3G \
    -XX:+CMSClassUnloadingEnabled \
    -XX:ReservedCodeCacheSize=192m \
    $EXTRA_JVM_OPTS \
    -jar `dirname $0`/sbt-launch.jar \
      "$@"
